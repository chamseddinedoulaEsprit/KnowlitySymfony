{% extends 'base.html.twig' %}

{% block title %}New EventRegistration{% endblock %}

{% block stylesheets %}

{% if app.session.get('roles') is null %}
        <script type="text/javascript">
            window.location.href = "{{ path('app_login') }}";
        </script>
    {% endif %}
    {% if app.session.get('deleted') ==1%}
        <script type="text/javascript">
            window.location.href = "{{ path('logout') }}";
        </script>
    {% endif %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<!-- Nice Select CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.css">

  <link href="{{ asset('assets/plugins/bootstrap/bootstrap.min.css') }}" rel="stylesheet">
  <link href="{{ asset('assets/plugins/bootstrap/bootstrap-slider.css') }}" rel="stylesheet">
  <link href="{{ asset('assets/plugins/font-awesome/css/font-awesome.min.css') }}" rel="stylesheet">
  <link href="{{ asset('assets/plugins/slick/slick.css') }}" rel="stylesheet">
  <link href="{{ asset('assets/plugins/slick/slick-theme.css') }}" rel="stylesheet">
  <link href="{{ asset('assets/plugins/jquery-nice-select/css/nice-select.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('assets/css/events.css') }}">
{% endblock %}

{% block body %}
    
    <br>
    <br>
    <br>
    <br>
    {{ include('event_registration/_form.html.twig') }}

{% endblock %}

{% block javascripts %}
<script>
var currentTab = 0;
document.addEventListener("DOMContentLoaded", function(event) {
    showTab(currentTab);
});

function showTab(n) {
    var x = document.getElementsByClassName("tab");
    x[n].style.display = "block";
    if (n == 0) {
        document.getElementById("prevBtn").style.display = "none";
    } else {
        document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == (x.length - 1)) {
        document.getElementById("nextBtn").innerHTML = "Submit";
    } else {
        document.getElementById("nextBtn").innerHTML = "Next";
    }
    fixStepIndicator(n);
}

function nextPrev(n) {
    var x = document.getElementsByClassName("tab");
    if (n == 1 && !validateForm()) return false;
    x[currentTab].style.display = "none";
    currentTab = currentTab + n;
    if (currentTab >= x.length) {
        document.getElementById("regForm").submit();
        return false;
    }
    showTab(currentTab);
}

function validateForm() {
    var x, y, i, valid = true;
    x = document.getElementsByClassName("tab");
    y = x[currentTab].querySelectorAll("input, select, textarea, checkbox");
    for (i = 0; i < y.length; i++) {
        if (y[i].value == "" && y[i].type !== "checkbox") {
            y[i].className += " invalid";
            valid = false;
        }
        if (y[i].type === "checkbox" && !y[i].checked) {
            y[i].className += " invalid";
            valid = false;
        }
    }
    if (valid) {
        document.getElementsByClassName("step")[currentTab].className += " finish";
    }
    return valid;
}

function fixStepIndicator(n) {
    var i, x = document.getElementsByClassName("step");
    for (i = 0; i < x.length; i++) {
        x[i].className = x[i].className.replace(" active", "");
    }
    x[n].className += " active";
}
</script>
{% endblock %}